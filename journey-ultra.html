<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Genie AI â€” Biological Intelligence Report Â· Unlimitr</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET + BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  /* Brand Colors */
  --primary-indigo: #0D3256;
  --spanish-green: #008944;
  --blue-gray: #0080DD;
  --earth-yellow: #FFC305;
  --dark-pastel-red: #FF0A0A;
  
  /* Light Theme */
  --deep: #FFFFFF;
  --deep2: #F8FAFC;
  --cyan: var(--blue-gray);
  --cyan-dim: rgba(0,128,221,.12);
  --cyan-glow: rgba(0,128,221,.3);
  --cyan-border: rgba(0,128,221,.2);
  --green: var(--spanish-green);
  --green-dim: rgba(0,137,68,.12);
  --amber: var(--earth-yellow);
  --amber-dim: rgba(255,195,5,.12);
  --red: var(--dark-pastel-red);
  --red-dim: rgba(255,10,10,.12);
  --text: #0F172A;
  --muted: rgba(100,116,139,.7);
  --card-bg: rgba(255,255,255,.95);
  --card-border: rgba(13,50,86,.12);
  --radius: 18px;
  --shadow: 0 8px 30px rgba(15,23,42,.08);
}
html{scroll-behavior:smooth;overflow-x:hidden}
body{
  font-family:'Outfit',sans-serif;
  background:var(--deep);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
  -webkit-font-smoothing:antialiased;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CANVAS BG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#bg-canvas{
  position:fixed;inset:0;z-index:0;
  opacity:.5;pointer-events:none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page-wrap{
  position:relative;z-index:2;
  max-width:960px;margin:0 auto;
  padding:0 16px 80px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero{
  text-align:center;
  padding:48px 16px 32px;
  opacity:0;transform:translateY(20px);
  animation:fadeUp .8s ease .2s forwards;
}
.hero-logo{
  height:36px;margin:0 auto 20px;
  display:block;filter:brightness(1.2);
}
.hero-pill{
  display:inline-flex;align-items:center;gap:6px;
  font-size:11px;font-weight:600;letter-spacing:.12em;
  text-transform:uppercase;
  padding:5px 14px;border-radius:999px;
  background:var(--cyan-dim);color:var(--cyan);
  border:1px solid rgba(0,212,255,.25);
  margin-bottom:18px;
  animation:pillPulse 3s ease-in-out 2s infinite;
}
.hero-pill-dot{
  width:6px;height:6px;border-radius:50%;
  background:var(--cyan);
  animation:dotBlink 1.4s ease-in-out infinite;
}
.hero-name{
  font-size:clamp(26px,5vw,42px);
  font-weight:700;line-height:1.18;
  margin-bottom:10px;
}
.hero-name span{color:var(--cyan);}
.hero-sub{
  font-size:15px;color:var(--muted);font-weight:400;
  max-width:520px;margin:0 auto;line-height:1.6;
}
.scan-bar-wrap{
  max-width:340px;margin:22px auto 0;
  height:3px;background:var(--cyan-dim);border-radius:999px;overflow:hidden;
}
.scan-bar{
  height:100%;width:0%;border-radius:999px;
  background:linear-gradient(90deg,var(--green),var(--cyan));
  transition:width 2.2s cubic-bezier(.4,0,.2,1);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION DIVIDER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sec-divider{
  height:1px;margin:32px 0;
  background:linear-gradient(90deg,transparent,var(--cyan-dim) 30%,var(--cyan-dim) 70%,transparent);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GLASS CARD BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.glass{
  background:var(--card-bg);
  border:1px solid var(--card-border);
  border-radius:var(--radius);
  backdrop-filter:blur(18px);
  box-shadow:var(--shadow),inset 0 1px 0 rgba(0,212,255,.07);
  position:relative;overflow:hidden;
}
.glass::before{
  content:'';
  position:absolute;top:0;left:10%;right:10%;height:1px;
  background:linear-gradient(90deg,transparent,var(--cyan-border),transparent);
}
.card-pad{padding:24px;}
@media(min-width:600px){.card-pad{padding:28px 32px;}}

/* section header */
.sec-label{
  font-size:10px;font-weight:600;letter-spacing:.12em;
  text-transform:uppercase;color:var(--muted);margin-bottom:6px;
}
.sec-title{
  font-size:18px;font-weight:700;margin-bottom:4px;
}
.sec-desc{font-size:13px;color:var(--muted);line-height:1.55;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: BIO AGE HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bio-age-card{
  margin-bottom:20px;
  opacity:0;transform:translateY(24px);
}
.bio-age-inner{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:1px;
  background:var(--card-border);
  border-radius:14px;
  overflow:hidden;
  margin:20px 0 0;
}
.bio-col{
  background:rgba(10,20,45,.9);
  padding:24px 20px;
  display:flex;flex-direction:column;align-items:center;gap:8px;
  transition:background .25s;
}
.bio-col:hover{background:var(--cyan-dim);}
.bio-col-label{
  font-size:10px;font-weight:600;letter-spacing:.12em;
  text-transform:uppercase;color:var(--muted);
}
.bio-col-num{
  font-size:clamp(48px,10vw,72px);
  font-weight:700;line-height:1;
  font-variant-numeric:tabular-nums;
}
.bio-col-num.cyan{color:var(--cyan);}
.bio-col-num.green{color:var(--green);}
.bio-col-sub{font-size:12px;color:var(--muted);text-align:center;}
.bio-delta{
  margin-top:16px;
  display:flex;align-items:center;justify-content:center;gap:10px;
  flex-wrap:wrap;
}
.bio-delta-badge{
  display:inline-flex;align-items:center;gap:6px;
  font-size:13px;font-weight:600;
  padding:7px 16px;border-radius:999px;
}
.bio-delta-badge.warn{background:rgba(255,107,107,.12);color:var(--red);border:1px solid rgba(255,107,107,.2);}
.bio-delta-badge.ok{background:var(--green-dim);color:var(--green);border:1px solid rgba(0,137,68,.2);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: HEALTH SCORE ARCH GAUGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.score-card{
  margin-bottom:20px;
  opacity:0;transform:translateY(24px);
}
.arch-svg-wrap{
  display:flex;justify-content:center;
  margin:16px 0 0;
}
#archSvg{
  width:100%;max-width:480px;height:auto;overflow:visible;
}
.arch-ring-faint{fill:none;stroke:rgba(255,255,255,.03);stroke-width:1;}
.arch-gauge-track{fill:none;stroke:rgba(0,212,255,.08);stroke-width:20;stroke-linecap:butt;}
#archFill{fill:none;stroke-width:20;stroke-linecap:butt;}
#archNeedle{stroke:#fff;stroke-width:2;stroke-linecap:round;opacity:0;transform-origin:240px 240px;}
#needleDot{fill:#fff;opacity:0;}
.arch-score-num{
  font-family:'Outfit',sans-serif;font-size:46px;font-weight:700;
  fill:var(--text);text-anchor:middle;dominant-baseline:middle;
  opacity:0;animation:fadeIn .6s ease 3.2s forwards;
}
.arch-score-label{
  font-family:'Outfit',sans-serif;font-size:13px;font-weight:500;
  fill:var(--muted);text-anchor:middle;dominant-baseline:middle;
  opacity:0;animation:fadeIn .5s ease 3.5s forwards;
}
.arch-score-status{
  font-family:'Outfit',sans-serif;font-size:12px;font-weight:600;
  text-anchor:middle;dominant-baseline:middle;
  opacity:0;animation:fadeIn .5s ease 3.6s forwards;
}
.score-footer{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:1px;background:var(--card-border);
  border-radius:12px;overflow:hidden;margin-top:16px;
}
.score-foot-cell{
  background:rgba(10,20,45,.9);
  padding:13px 12px;
  display:flex;flex-direction:column;gap:3px;
  transition:background .25s;
}
.score-foot-cell:hover{background:var(--cyan-dim);}
.sfc-label{font-size:9.5px;font-weight:600;letter-spacing:.1em;text-transform:uppercase;color:var(--muted);}
.sfc-val{font-size:18px;font-weight:700;}
.sfc-val.cyan{color:var(--cyan);}
.sfc-val.green{color:var(--green);}
.sfc-val.amber{color:var(--amber);}
.sfc-sub{font-size:10.5px;color:var(--muted);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: LIVE METRIC CARDS (6-grid)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.metrics-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;margin-bottom:20px;
}
@media(min-width:640px){
  .metrics-grid{grid-template-columns:repeat(3,1fr);}
}
.metric-card{
  padding:18px 16px;
  opacity:0;transform:translateY(16px);
  cursor:default;
  transition:transform .2s,box-shadow .2s;
}
.metric-card:hover{
  transform:translateY(-3px);
  box-shadow:0 16px 40px rgba(0,0,0,.5),0 0 0 1px rgba(0,212,255,.15);
}
.mc-icon{
  width:36px;height:36px;border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  font-size:18px;margin-bottom:10px;
}
.mc-icon.cyan{background:var(--cyan-dim);}
.mc-icon.green{background:var(--green-dim);}
.mc-icon.amber{background:rgba(255,179,71,.12);}
.mc-icon.red{background:rgba(255,107,107,.12);}
.mc-label{font-size:11px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:var(--muted);margin-bottom:6px;}
.mc-score{font-size:28px;font-weight:700;line-height:1;margin-bottom:6px;}
.mc-score.cyan{color:var(--cyan);}
.mc-score.green{color:var(--green);}
.mc-score.amber{color:var(--amber);}
.mc-score.red{color:var(--red);}
/* Mini arc gauge */
.mini-arc-wrap{margin-bottom:8px;}
.mini-arc-track{height:4px;background:var(--cyan-dim);border-radius:999px;overflow:visible;}
.mini-arc-fill{
  height:100%;border-radius:999px;width:0%;
  position:relative;transition:width 1.4s cubic-bezier(.4,0,.2,1) .2s;
}
.mini-arc-fill.cyan{background:linear-gradient(90deg,var(--blue-gray),var(--cyan));}
.mini-arc-fill.green{background:linear-gradient(90deg,var(--spanish-green),var(--green));}
.mini-arc-fill.amber{background:linear-gradient(90deg,#c07800,var(--amber));}
.mini-arc-fill.red{background:linear-gradient(90deg,#b03030,var(--red));}
.mini-arc-fill::after{
  content:'';position:absolute;right:-2px;top:50%;
  width:9px;height:9px;border-radius:50%;transform:translateY(-50%);
  background:inherit;box-shadow:0 0 8px 2px currentColor;opacity:.85;
}
.mc-desc{font-size:11.5px;color:var(--muted);line-height:1.5;}
.mc-badge{
  display:inline-flex;align-items:center;
  font-size:9.5px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;
  padding:3px 9px;border-radius:999px;margin-top:6px;
}
.mc-badge.ok{background:var(--green-dim);color:var(--green);}
.mc-badge.warn{background:rgba(255,179,71,.14);color:var(--amber);}
.mc-badge.bad{background:rgba(255,107,107,.12);color:var(--red);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: RISK RADAR + METRICS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.radar-section{
  margin-bottom:20px;
  opacity:0;transform:translateY(24px);
}
.radar-row{
  display:flex;flex-direction:column;gap:24px;
  margin-top:20px;
}
@media(min-width:600px){
  .radar-row{flex-direction:row;align-items:center;}
  .radar-svg-col{flex:0 0 240px;}
  .radar-metrics-col{flex:1;}
}
#radarSvg{width:100%;max-width:240px;height:auto;overflow:visible;display:block;margin:0 auto;}
.radar-ring{fill:none;stroke:rgba(0,212,255,.07);stroke-width:1;}
.radar-spoke{stroke:rgba(0,212,255,.07);stroke-width:1;}
.radar-axis-label{
  font-family:'Outfit',sans-serif;font-size:10px;font-weight:500;
  fill:var(--muted);dominant-baseline:middle;
}
#radarPoly{
  fill:var(--green-dim);stroke:var(--green);
  stroke-width:1.5;stroke-linejoin:round;
  stroke-dasharray:800;stroke-dashoffset:800;
}
#tracerDot{r:5;fill:var(--cyan);filter:url(#tracerGlow);opacity:0;}
.radar-vert{fill:var(--green);r:3;opacity:0;}
.radar-vert.show{animation:dotPop .4s cubic-bezier(.34,1.56,.64,1) forwards;}
.radar-center-score{
  font-family:'Outfit',sans-serif;font-size:22px;font-weight:700;
  fill:var(--text);text-anchor:middle;dominant-baseline:middle;
  opacity:0;animation:fadeIn .6s ease 2.4s forwards;
}
.radar-center-sub{
  font-family:'Outfit',sans-serif;font-size:9.5px;font-weight:500;
  fill:var(--muted);text-anchor:middle;dominant-baseline:middle;
  opacity:0;animation:fadeIn .6s ease 2.6s forwards;
}
/* Biomarker bars in radar section */
.bio-bars{display:flex;flex-direction:column;gap:14px;}
.bio-bar-row{display:flex;flex-direction:column;gap:5px;}
.bio-bar-hd{display:flex;justify-content:space-between;align-items:baseline;}
.bio-bar-name{font-size:11.5px;font-weight:500;color:var(--muted);letter-spacing:.04em;text-transform:uppercase;}
.bio-bar-val{font-size:11.5px;font-weight:700;}
.bio-bar-val.cyan{color:var(--cyan);}
.bio-bar-val.green{color:var(--green);}
.bio-bar-val.amber{color:var(--amber);}
.bio-bar-track{height:5px;background:rgba(0,212,255,.07);border-radius:999px;overflow:hidden;}
.bio-bar-fill{
  height:100%;border-radius:999px;width:0%;
  transition:width 1.6s cubic-bezier(.4,0,.2,1) .4s;
}
.bio-bar-fill.cyan{background:linear-gradient(90deg,#0090c8,var(--cyan));}
.bio-bar-fill.green{background:linear-gradient(90deg,#007a52,var(--green));}
.bio-bar-fill.amber{background:linear-gradient(90deg,#c07800,var(--amber));}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: PERSONALISED INSIGHTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.insights-section{
  margin-bottom:20px;
  opacity:0;transform:translateY(24px);
}
.ai-insight-box{
  margin-top:16px;
  padding:20px;
  background:rgba(0,212,255,.04);
  border:1px solid rgba(0,212,255,.1);
  border-radius:14px;
  font-size:14.5px;line-height:1.75;color:var(--text);
}
.ai-insight-box b{color:var(--cyan);}
.condition-chips{
  display:flex;flex-wrap:wrap;gap:8px;margin-top:14px;
}
.cond-chip{
  display:inline-flex;align-items:center;gap:6px;
  font-size:12px;font-weight:600;
  padding:6px 14px;border-radius:999px;
}
.cond-chip.diabetes{background:rgba(255,107,107,.1);color:#ff9090;border:1px solid rgba(255,107,107,.2);}
.cond-chip.thyroid{background:rgba(255,179,71,.1);color:var(--amber);border:1px solid rgba(255,179,71,.2);}
.cond-chip.pcos{background:rgba(180,100,255,.1);color:#d09cff;border:1px solid rgba(180,100,255,.2);}
.cond-chip.bp{background:rgba(255,107,107,.1);color:#ff9090;border:1px solid rgba(255,107,107,.2);}
.cond-chip.cholesterol{background:rgba(255,200,71,.1);color:#ffe07a;border:1px solid rgba(255,200,71,.2);}
.cond-chip.joint{background:rgba(100,180,255,.1);color:#8bc8ff;border:1px solid rgba(100,180,255,.2);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: BODY SYSTEM RISK BREAKDOWN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.risk-grid{
  display:grid;grid-template-columns:repeat(2,1fr);
  gap:12px;margin-top:20px;
}
@media(min-width:640px){.risk-grid{grid-template-columns:repeat(4,1fr);}}
.risk-col{
  background:rgba(10,20,45,.9);
  border:1px solid var(--card-border);
  border-radius:14px;padding:16px 14px;
  display:flex;flex-direction:column;align-items:center;gap:8px;
  text-align:center;
  transition:border-color .25s,box-shadow .25s;
}
.risk-col:hover{border-color:rgba(0,212,255,.25);box-shadow:0 8px 24px rgba(0,0,0,.3);}
.risk-col-icon{font-size:22px;}
.risk-col-name{font-size:11px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:var(--muted);}
.risk-circle-wrap{position:relative;width:56px;height:56px;}
.risk-circle-wrap svg{width:56px;height:56px;overflow:visible;transform:rotate(-90deg);}
.risk-circle-track{fill:none;stroke:rgba(0,212,255,.08);stroke-width:5;}
.risk-circle-fill{fill:none;stroke-width:5;stroke-linecap:round;stroke-dasharray:151;stroke-dashoffset:151;transition:stroke-dashoffset 1.6s cubic-bezier(.4,0,.2,1) .3s;}
.risk-circle-fill.ok{stroke:var(--green);}
.risk-circle-fill.warn{stroke:var(--amber);}
.risk-circle-fill.bad{stroke:var(--red);}
.risk-pct{
  position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
  font-size:13px;font-weight:700;
}
.risk-status-badge{
  font-size:9px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;
  padding:3px 9px;border-radius:999px;
}
.risk-status-badge.ok{background:rgba(0,184,122,.12);color:var(--green);}
.risk-status-badge.warn{background:rgba(255,179,71,.14);color:var(--amber);}
.risk-status-badge.bad{background:rgba(255,107,107,.12);color:var(--red);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: TRAJECTORY SVG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.trajectory-section{
  margin-bottom:20px;
  opacity:0;transform:translateY(24px);
}
.traj-row{
  display:grid;grid-template-columns:1fr;gap:16px;margin-top:20px;
}
@media(min-width:600px){.traj-row{grid-template-columns:1fr 1fr;}}
.traj-card{
  padding:20px;
  border-radius:14px;
  border:1px solid rgba(0,212,255,.1);
}
.traj-card.danger{background:rgba(255,107,107,.04);border-color:rgba(255,107,107,.15);}
.traj-card.success{background:rgba(0,184,122,.04);border-color:rgba(0,184,122,.15);}
.traj-card-title{font-size:13px;font-weight:700;margin-bottom:4px;}
.traj-card-title.danger{color:#ff9090;}
.traj-card-title.success{color:var(--green);}
.traj-card-desc{font-size:12px;color:var(--muted);line-height:1.55;margin-bottom:14px;}
#trajSvg{width:100%;max-width:860px;height:auto;display:block;margin:0 auto;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: WEEKLY STATS STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stats-strip{
  display:grid;grid-template-columns:repeat(2,1fr);
  gap:1px;background:var(--card-border);
  border-radius:14px;overflow:hidden;margin-bottom:20px;
  opacity:0;transform:translateY(20px);
}
@media(min-width:480px){.stats-strip{grid-template-columns:repeat(4,1fr);}}
.stat-cell{
  background:rgba(10,20,45,.9);
  padding:14px 16px;
  display:flex;flex-direction:column;gap:3px;
  transition:background .25s;
}
.stat-cell:hover{background:rgba(0,212,255,.04);}
.stat-label{font-size:9.5px;font-weight:600;letter-spacing:.1em;text-transform:uppercase;color:var(--muted);}
.stat-num{font-size:17px;font-weight:700;}
.stat-sub{font-size:10.5px;color:var(--muted);}
.stat-delta{font-size:10px;font-weight:600;}
.stat-delta.up{color:var(--green);}
.stat-delta.dn{color:var(--red);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION: PLAN RECOMMENDATION CTA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cta-section{
  margin-bottom:20px;
  opacity:0;transform:translateY(24px);
}
.cta-inner{
  padding:32px 24px;text-align:center;
}
@media(min-width:600px){.cta-inner{padding:40px 48px;}}
.cta-plan-name{
  display:inline-block;
  font-size:11px;font-weight:700;letter-spacing:.12em;text-transform:uppercase;
  padding:6px 16px;border-radius:999px;
  background:rgba(0,184,122,.12);color:var(--green);
  border:1px solid rgba(0,184,122,.2);
  margin-bottom:16px;
}
.cta-heading{
  font-size:clamp(20px,4vw,30px);font-weight:700;
  margin-bottom:10px;line-height:1.25;
}
.cta-heading span{color:var(--cyan);}
.cta-sub{font-size:14px;color:var(--muted);max-width:480px;margin:0 auto 24px;line-height:1.65;}
.cta-badges{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:28px;}
.cta-badge{
  display:inline-flex;align-items:center;gap:5px;
  font-size:12px;font-weight:600;
  padding:5px 14px;border-radius:999px;
  background:rgba(0,212,255,.07);color:var(--cyan);
  border:1px solid rgba(0,212,255,.14);
}
.cta-btns{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;}
.btn-primary{
  display:inline-flex;align-items:center;gap:8px;
  font-family:'Outfit',sans-serif;
  font-size:15px;font-weight:700;
  padding:14px 32px;border-radius:12px;
  background:linear-gradient(135deg,#00b87a,#00d4ff);
  color:#0a1628;border:none;cursor:pointer;
  transition:transform .2s,box-shadow .2s;
  text-decoration:none;
}
.btn-primary:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 32px rgba(0,212,255,.35);
}
.btn-outline{
  display:inline-flex;align-items:center;gap:8px;
  font-family:'Outfit',sans-serif;
  font-size:15px;font-weight:600;
  padding:14px 28px;border-radius:12px;
  background:transparent;color:var(--cyan);
  border:1px solid rgba(0,212,255,.25);cursor:pointer;
  transition:border-color .2s,background .2s;
  text-decoration:none;
}
.btn-outline:hover{background:rgba(0,212,255,.07);border-color:rgba(0,212,255,.4);}
.cta-trust{margin-top:14px;font-size:11.5px;color:var(--muted);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS / KEYFRAMES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{to{opacity:1}}
@keyframes dotBlink{0%,100%{opacity:1}50%{opacity:.3}}
@keyframes pillPulse{
  0%,100%{box-shadow:0 0 0 0 rgba(0,212,255,0);}
  50%{box-shadow:0 0 14px 2px rgba(0,212,255,.25);}
}
@keyframes dotPop{from{r:0;opacity:0}to{r:3;opacity:1}}
@keyframes glowPulse{
  0%,100%{filter:drop-shadow(0 0 4px rgba(0,212,255,.4));}
  50%{filter:drop-shadow(0 0 12px rgba(0,212,255,.8));}
}
@keyframes countUp{}
@keyframes shimmer{
  0%{transform:translateX(-100%)}
  100%{transform:translateX(300%)}
}
.shimmer-wrap{position:relative;overflow:hidden;}
.shimmer-wrap::after{
  content:'';position:absolute;top:0;left:0;
  width:40%;height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.06),transparent);
  animation:shimmer 2.5s linear infinite;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLL ANIMATIONS â€” JS driven
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.will-animate{opacity:0;transform:translateY(28px);}
.animated{opacity:1;transform:translateY(0);transition:opacity .65s ease,transform .65s ease;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page-footer{
  text-align:center;padding:20px 0 0;
  font-size:11px;color:var(--muted);
  opacity:.6;
}

/* MOBILE TOUCH */
@media(max-width:480px){
  #scene{animation:none;}
  .bio-col-num{font-size:44px;}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#loadingScreen{
  position:fixed;inset:0;z-index:9999;
  background:var(--deep);
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;gap:20px;
  transition:opacity .6s ease;
}
.loader-logo{height:32px;margin-bottom:8px;}
.loader-scan-text{
  font-size:13px;font-weight:500;letter-spacing:.1em;
  text-transform:uppercase;color:var(--muted);
  animation:dotBlink 1.2s ease-in-out infinite;
}
.loader-bar-wrap{
  width:260px;height:2px;
  background:rgba(0,212,255,.1);border-radius:999px;overflow:hidden;
}
.loader-bar{
  height:100%;width:0%;
  background:linear-gradient(90deg,var(--green),var(--cyan));
  border-radius:999px;transition:width .1s linear;
}
.loader-sub{font-size:11px;color:rgba(0,212,255,.45);letter-spacing:.08em;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STICKY NAV (mobile)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sticky-nav{
  position:fixed;bottom:16px;left:50%;transform:translateX(-50%);
  z-index:100;
  display:flex;gap:6px;
  background:rgba(10,20,45,.9);
  backdrop-filter:blur(16px);
  border:1px solid var(--card-border);
  border-radius:999px;
  padding:8px 12px;
  opacity:0;
  transition:opacity .4s ease;
  pointer-events:none;
}
.sticky-nav.visible{opacity:1;pointer-events:all;}
.nav-dot{
  width:8px;height:8px;border-radius:50%;
  background:rgba(0,212,255,.25);
  cursor:pointer;transition:background .2s,transform .2s;
}
.nav-dot.active{background:var(--cyan);transform:scale(1.3);}

/* pulse live badge */
.live-badge{
  display:inline-flex;align-items:center;gap:5px;
  font-size:10px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;
  color:var(--cyan);
}
.live-dot{
  width:6px;height:6px;border-radius:50%;
  background:var(--cyan);
  animation:dotBlink 1.2s ease-in-out infinite;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   OTP UNLOCK OVERLAY â€” Premium Design
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.journey-unlock-overlay{
  position:fixed;inset:0;z-index:10000;
  display:flex;align-items:center;justify-content:center;
  background:rgba(5,10,22,.92);
  backdrop-filter:blur(12px);
  transition:opacity .5s ease,visibility .5s ease;
}
.journey-unlock-overlay.journey-unlocked{
  opacity:0;visibility:hidden;pointer-events:none;
}
.journey-unlock-card{
  background:var(--card-bg);
  border:1px solid var(--cyan-border);
  border-radius:24px;
  padding:40px 32px;
  max-width:420px;width:90%;
  text-align:center;
  box-shadow:0 32px 80px rgba(0,0,0,.8),inset 0 1px 0 rgba(0,212,255,.1);
  position:relative;overflow:hidden;
}
.journey-unlock-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(0,212,255,.4),transparent);
}
.journey-unlock-card .otp-section{display:none;}
.journey-unlock-card.otp-mode .mobile-section{display:none;}
.journey-unlock-card.otp-mode .otp-section{display:block;}
.unlock-badge{
  display:inline-block;
  font-size:10px;font-weight:700;letter-spacing:.12em;
  text-transform:uppercase;
  padding:6px 16px;border-radius:999px;
  background:rgba(0,184,122,.15);
  color:var(--green);
  border:1px solid rgba(0,184,122,.25);
  margin-bottom:20px;
}
.unlock-title{
  font-size:22px;font-weight:700;color:var(--text);
  margin-bottom:12px;line-height:1.3;
}
.unlock-desc{
  font-size:14px;color:var(--muted);
  line-height:1.6;margin-bottom:28px;
}
.unlock-label{
  display:block;
  font-size:12px;font-weight:600;color:var(--muted);
  text-align:left;margin-bottom:8px;
}
.unlock-input-group{
  display:flex;gap:8px;margin-bottom:12px;
}
.unlock-select{
  width:90px;padding:12px 10px;
  background:rgba(10,20,45,.9);
  border:1px solid var(--cyan-border);
  border-radius:12px;
  color:var(--text);
  font-size:14px;font-weight:500;
  cursor:pointer;transition:border-color .2s;
}
.unlock-select:focus{
  outline:none;border-color:var(--cyan);
  box-shadow:0 0 0 3px rgba(0,212,255,.1);
}
.unlock-input{
  flex:1;padding:12px 16px;
  background:rgba(10,20,45,.9);
  border:1px solid var(--cyan-border);
  border-radius:12px;
  color:var(--text);
  font-size:14px;
  transition:border-color .2s,box-shadow .2s;
}
.unlock-input:focus{
  outline:none;border-color:var(--cyan);
  box-shadow:0 0 0 3px rgba(0,212,255,.1);
}
.unlock-input::placeholder{color:rgba(180,200,240,.4);}
.unlock-otp-input{
  text-align:center;letter-spacing:8px;
  font-size:20px;font-weight:600;
  font-variant-numeric:tabular-nums;
  margin-bottom:16px;
}
.unlock-error{
  font-size:12px;color:var(--red);
  text-align:left;margin-bottom:12px;min-height:18px;
}
.unlock-btn-primary{
  width:100%;padding:14px 24px;
  background:linear-gradient(135deg,var(--green),var(--cyan));
  color:#0a1628;border:none;
  border-radius:12px;
  font-size:15px;font-weight:700;
  cursor:pointer;transition:transform .2s,box-shadow .2s;
  margin-bottom:12px;
}
.unlock-btn-primary:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 32px rgba(0,212,255,.4);
}
.unlock-btn-primary:active{transform:translateY(0);}
.unlock-btn-secondary{
  width:100%;padding:10px 24px;
  background:transparent;
  color:var(--muted);border:1px solid var(--cyan-border);
  border-radius:12px;
  font-size:13px;font-weight:600;
  cursor:pointer;transition:border-color .2s,background .2s;
}
.unlock-btn-secondary:hover{
  background:rgba(0,212,255,.05);
  border-color:var(--cyan);
}
.unlock-otp-text{
  font-size:13px;color:var(--muted);
  margin-bottom:12px;text-align:left;
}
.unlock-otp-text strong{color:var(--cyan);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BLUR WRAP â€” Content hidden until OTP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.journey-blur-wrap{
  position:relative;z-index:2;
  transition:filter .5s ease;
}
.journey-blur-wrap.journey-blurred{
  filter:blur(8px);pointer-events:none;user-select:none;
}
.page-wrap{
  position:relative;z-index:2;
  max-width:960px;margin:0 auto;
  padding:0 16px 80px;
}
</style>
</head>
<body>

<!-- LOADING SCREEN -->
<div id="loadingScreen">
  <img class="loader-logo" src="https://unlimitr.com/img/hca_logo.svg" alt="Unlimitr" onerror="this.style.display='none'">
  <div class="loader-scan-text" id="loaderText">Initialising AI Engineâ€¦</div>
  <div class="loader-bar-wrap"><div class="loader-bar" id="loaderBar"></div></div>
  <div class="loader-sub" id="loaderSub">Analysing biomarkers</div>
</div>

<!-- PARTICLE CANVAS -->
<canvas id="bg-canvas"></canvas>

<!-- MAIN PAGE -->
<div id="journeyBlurWrap" class="journey-blur-wrap journey-blurred">
<div class="page-wrap" id="pageWrap" style="display:none;">

  <!-- HERO -->
  <header class="hero" id="heroSection">
    <img class="hero-logo" src="https://unlimitr.com/img/hca_logo.svg" alt="Unlimitr"
         onerror="this.style.display='none'">
    <div class="hero-pill">
      <span class="hero-pill-dot"></span>
      Genie AI Â· Biological Intelligence Report
    </div>
    <h1 class="hero-name">Welcome back,&nbsp;<span id="heroName">â€”</span></h1>
    <p class="hero-sub">Your personalised health intelligence has been calibrated from <strong id="heroDataPoints">â€”</strong> data signals. Here's what your body is telling you.</p>
    <div class="scan-bar-wrap"><div class="scan-bar" id="scanBar"></div></div>
  </header>

  <!-- â”€â”€ STATS STRIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="stats-strip glass will-animate" id="statsStrip">
    <div class="stat-cell">
      <span class="stat-label">BMI</span>
      <span class="stat-num" id="statBmi">â€”</span>
      <span class="stat-sub" id="statBmiCat">â€”</span>
    </div>
    <div class="stat-cell">
      <span class="stat-label">BMR</span>
      <span class="stat-num" id="statBmr">â€”</span>
      <span class="stat-sub">kcal / day</span>
    </div>
    <div class="stat-cell">
      <span class="stat-label">TDEE</span>
      <span class="stat-num" id="statTdee">â€”</span>
      <span class="stat-sub">kcal / day</span>
    </div>
    <div class="stat-cell">
      <span class="stat-label">Weight Gap</span>
      <span class="stat-num" id="statWeightGap">â€”</span>
      <span class="stat-delta dn" id="statWeightGapLabel">kg to goal</span>
    </div>
  </div>

  <!-- â”€â”€ BIO AGE CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="glass bio-age-card card-pad will-animate" id="bioAgeCard">
    <div class="sec-label">Core Intelligence</div>
    <div class="sec-title">Biological Age Analysis</div>
    <p class="sec-desc">Your body's internal clock vs. your birth age â€” the most powerful health indicator.</p>
    <div class="bio-age-inner">
      <div class="bio-col">
        <span class="bio-col-label">Biological Age</span>
        <span class="bio-col-num cyan" id="bioAgeNum">â€”</span>
        <span class="bio-col-sub">How old your body<br>currently functions</span>
      </div>
      <div class="bio-col">
        <span class="bio-col-label">Chronological Age</span>
        <span class="bio-col-num green" id="chronoAgeNum">â€”</span>
        <span class="bio-col-sub">Your actual age<br>at birth</span>
      </div>
    </div>
    <div class="bio-delta">
      <span class="bio-delta-badge" id="bioDeltaBadge">â€”</span>
      <span style="font-size:12px;color:var(--muted);" id="bioDeltaMsg">â€”</span>
    </div>
  </div>

  <!-- â”€â”€ HEALTH SCORE ARC GAUGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="glass score-card card-pad will-animate" id="scoreCard">
    <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px;">
      <div>
        <div class="sec-label">AI Health Score</div>
        <div class="sec-title">Overall Wellness Index</div>
        <p class="sec-desc">Composite score across 6 physiological domains.</p>
      </div>
      <div class="live-badge"><span class="live-dot"></span>Live</div>
    </div>
    <div class="arch-svg-wrap">
      <svg id="archSvg" viewBox="0 0 480 260" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="archGrad" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#00c87a"/>
            <stop offset="40%" stop-color="#00c87a"/>
            <stop offset="65%" stop-color="#ffc305"/>
            <stop offset="82%" stop-color="#ff8c00"/>
            <stop offset="100%" stop-color="#ff3c3c"/>
          </linearGradient>
          <filter id="needleGlow"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          <filter id="ndotGlow"><feGaussianBlur stdDeviation="4" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          <clipPath id="archClip"><rect x="0" y="0" width="480" height="252"/></clipPath>
        </defs>
        <!-- ring tracks -->
        <path class="arch-ring-faint" d="M 60,240 A 180,180 0 0 1 420,240" clip-path="url(#archClip)"/>
        <path class="arch-ring-faint" d="M 80,240 A 160,160 0 0 1 400,240" clip-path="url(#archClip)"/>
        <path class="arch-ring-faint" d="M 100,240 A 140,140 0 0 1 380,240" clip-path="url(#archClip)"/>
        <!-- gauge track -->
        <path class="arch-gauge-track" d="M 100,240 A 140,140 0 0 1 380,240" clip-path="url(#archClip)"/>
        <!-- gauge fill -->
        <path id="archFill" d="M 100,240 A 140,140 0 0 1 380,240"
          stroke="url(#archGrad)" clip-path="url(#archClip)"/>
        <!-- needle -->
        <line id="archNeedle" x1="240" y1="240" x2="240" y2="110" filter="url(#needleGlow)"/>
        <circle id="needleDot" cx="240" cy="240" r="7" filter="url(#ndotGlow)"/>
        <!-- score text -->
        <text class="arch-score-num" id="archScoreNum" x="240" y="200">â€”</text>
        <text class="arch-score-label" id="archScoreLabel" x="240" y="222">Health Score</text>
        <text class="arch-score-status" id="archScoreStatus" x="240" y="240">â€”</text>
        <!-- ticks -->
        <g id="archTicks"></g>
      </svg>
    </div>
    <div class="score-footer">
      <div class="score-foot-cell shimmer-wrap">
        <span class="sfc-label">Metabolic Age</span>
        <span class="sfc-val amber" id="sfcMetaAge">â€”</span>
        <span class="sfc-sub">vs chrono age</span>
      </div>
      <div class="score-foot-cell shimmer-wrap">
        <span class="sfc-label">Recovery Score</span>
        <span class="sfc-val green" id="sfcRecovery">â€”</span>
        <span class="sfc-sub">capacity index</span>
      </div>
      <div class="score-foot-cell shimmer-wrap">
        <span class="sfc-label">Lifestyle Index</span>
        <span class="sfc-val cyan" id="sfcLifestyle">â€”</span>
        <span class="sfc-sub">behavioural output</span>
      </div>
    </div>
  </div>

  <!-- â”€â”€ LIVE METRIC CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="metrics-grid" id="metricsGrid">
    <!-- injected by JS -->
  </div>

  <!-- â”€â”€ RISK RADAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="glass radar-section card-pad will-animate" id="radarSection">
    <div class="sec-label">System Risk Map</div>
    <div class="sec-title">Risk Distribution Overview</div>
    <p class="sec-desc">Distributed across 6 physiological systems. Each axis represents a body domain.</p>
    <div class="radar-row">
      <div class="radar-svg-col">
        <svg id="radarSvg" viewBox="-12 -12 324 324" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <filter id="tracerGlow"><feGaussianBlur stdDeviation="4" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
            <filter id="polyGlow"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          </defs>
          <g id="rRings"></g>
          <g id="rSpokes"></g>
          <g id="rLabels"></g>
          <polygon id="radarPoly" points="" filter="url(#polyGlow)"/>
          <g id="rVerts"></g>
          <circle id="tracerDot"/>
          <text class="radar-center-score" id="radarScore" x="150" y="143">â€”</text>
          <text class="radar-center-sub" x="150" y="163">Health Score</text>
        </svg>
      </div>
      <div class="radar-metrics-col">
        <div class="bio-bars" id="bioBars"></div>
      </div>
    </div>
  </div>

  <!-- â”€â”€ PERSONALISED INSIGHTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="glass insights-section card-pad will-animate" id="insightsSection">
    <div class="sec-label">AI Health Intelligence</div>
    <div class="sec-title">Personalised Insights</div>
    <div class="ai-insight-box" id="insightText">â€”</div>
    <div class="condition-chips" id="conditionChips"></div>
  </div>

  <!-- â”€â”€ BODY SYSTEM RISK BREAKDOWN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="glass card-pad will-animate" id="riskBreakdownSection">
    <div class="sec-label">Body System Analysis</div>
    <div class="sec-title">System-Level Risk Profile</div>
    <p class="sec-desc">Hover any system to see its impact on your overall score.</p>
    <div class="risk-grid" id="riskGrid"></div>
  </div>

  <!-- â”€â”€ TRAJECTORY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="glass trajectory-section card-pad will-animate" id="trajSection">
    <div class="sec-label">Predictive Engine</div>
    <div class="sec-title">Metabolic Trajectory Simulation</div>
    <p class="sec-desc">A contrast between two futures â€” your body with and without structured intervention.</p>
    <svg id="trajSvg" viewBox="0 0 860 260" style="margin-top:20px;" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="trajGreenGrad" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0%" stop-color="rgba(0,184,122,0)"/>
          <stop offset="100%" stop-color="rgba(0,184,122,0.3)"/>
        </linearGradient>
        <linearGradient id="trajRedGrad" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0%" stop-color="rgba(255,107,107,0)"/>
          <stop offset="100%" stop-color="rgba(255,107,107,0.25)"/>
        </linearGradient>
        <filter id="lineGlow2"><feGaussianBlur stdDeviation="2" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
      </defs>
      <!-- grid lines -->
      <g id="trajGrid"></g>
      <!-- week labels -->
      <g id="trajWeekLabels"></g>
      <!-- intervention path (green) -->
      <path id="trajGreenFill" fill="url(#trajGreenGrad)" opacity=".18"/>
      <path id="trajGreenLine" fill="none" stroke="var(--green)" stroke-width="2.5" stroke-linecap="round" filter="url(#lineGlow2)"/>
      <!-- no-intervention (red dashed) -->
      <path id="trajRedFill" fill="url(#trajRedGrad)" opacity=".12"/>
      <path id="trajRedLine" fill="none" stroke="var(--red)" stroke-width="1.8" stroke-dasharray="7 5" stroke-linecap="round"/>
      <!-- milestone dots -->
      <g id="trajMilestones"></g>
      <!-- labels -->
      <text x="60" y="250" font-family="Outfit,sans-serif" font-size="11" fill="rgba(180,200,240,.4)">Week 0</text>
      <text x="820" y="250" text-anchor="end" font-family="Outfit,sans-serif" font-size="11" fill="rgba(180,200,240,.4)">Week 12</text>
      <!-- legend -->
      <g transform="translate(20,18)">
        <line x1="0" y1="5" x2="22" y2="5" stroke="var(--green)" stroke-width="2.5"/>
        <text x="28" y="9" font-family="Outfit,sans-serif" font-size="11" fill="rgba(180,200,240,.7)">With Unlimitr</text>
        <line x1="150" y1="5" x2="172" y2="5" stroke="var(--red)" stroke-width="1.8" stroke-dasharray="6 4"/>
        <text x="178" y="9" font-family="Outfit,sans-serif" font-size="11" fill="rgba(180,200,240,.7)">Without Intervention</text>
      </g>
    </svg>
    <div class="traj-row">
      <div class="traj-card danger">
        <div class="traj-card-title danger">âš  Without Intervention</div>
        <p class="traj-card-desc" id="trajDangerText">â€”</p>
      </div>
      <div class="traj-card success">
        <div class="traj-card-title success">âœ“ With Unlimitr Programme</div>
        <p class="traj-card-desc" id="trajSuccessText">â€”</p>
      </div>
    </div>
  </div>

  <!-- â”€â”€ CTA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="glass cta-section will-animate" id="ctaSection">
    <div class="cta-inner">
      <div class="cta-plan-name" id="ctaPlanBadge">Personalised Plan Ready</div>
      <h2 class="cta-heading">Your Transformation<br><span id="ctaHeadingSpan">Blueprint Is Ready</span></h2>
      <p class="cta-sub" id="ctaSubText">â€”</p>
      <div class="cta-badges">
        <span class="cta-badge">âœ“ Doctor-led programme</span>
        <span class="cta-badge">âœ“ AI-personalised nutrition</span>
        <span class="cta-badge">âœ“ 100,000+ clients</span>
        <span class="cta-badge">âœ“ Money-back guarantee</span>
      </div>
      <div class="cta-btns">
        <a href="solution/offer-upgraded.html" class="btn-primary" id="ctaPrimary">ğŸš€ Unlock My Plan</a>
        <a href="solution/offer-upgraded.html" class="btn-outline">View Full Blueprint</a>
      </div>
      <p class="cta-trust">Refundable within 7 days Â· Managed by certified health professionals</p>
    </div>
  </div>

  <div class="page-footer">
    Powered by Genie AI Â· Unlimitr Health Intelligence Platform Â· All data processed locally
  </div>
</div><!-- /page-wrap -->
</div><!-- /journeyBlurWrap -->

<!-- OTP UNLOCK OVERLAY -->
<div class="journey-unlock-overlay" id="unlockOverlay" style="display: flex; visibility: visible; opacity: 1;">
  <div class="journey-unlock-card" id="unlockCard">
    <span class="unlock-badge">Exclusive Access</span>
    <h2 class="unlock-title">Unlock Your Full Genie AI Report</h2>
    <p class="unlock-desc">Verify your mobile number to view your complete health blueprint and enjoy an additional 10% off on your personalized plan.</p>
    <div class="mobile-section">
      <label class="unlock-label">Mobile number <span style="color: var(--red);">*</span></label>
      <div class="unlock-input-group">
        <select id="unlockCountryCode" class="unlock-select">
          <option value="+91" selected>+91</option>
          <option value="+1">+1</option>
          <option value="+44">+44</option>
          <option value="+971">+971</option>
          <option value="+61">+61</option>
        </select>
        <input type="tel" class="unlock-input" id="unlockMobile" placeholder="10-digit mobile number" maxlength="10" required />
      </div>
      <div class="unlock-error" id="unlockMobileError"></div>
      <button type="button" class="unlock-btn-primary" id="sendOtpBtn">Unlock &amp; Get 10% Off</button>
    </div>
    <div class="otp-section">
      <label class="unlock-label">OTP <span style="color: var(--red);">*</span></label>
      <p class="unlock-otp-text">Enter OTP sent to <strong id="unlockShowNum"></strong></p>
      <input type="text" class="unlock-input unlock-otp-input" id="unlockOtp" placeholder="Enter 4-digit OTP" maxlength="4" inputmode="numeric" pattern="[0-9]{4}" autocomplete="one-time-code" required />
      <button type="button" class="unlock-btn-primary" id="verifyOtpBtn">Verify OTP</button>
      <button type="button" class="unlock-btn-secondary" id="unlockOtpCancel">Cancel</button>
    </div>
  </div>
</div>

<!-- STICKY NAV -->
<div class="sticky-nav" id="stickyNav">
  <div class="nav-dot active" data-section="heroSection"></div>
  <div class="nav-dot" data-section="bioAgeCard"></div>
  <div class="nav-dot" data-section="scoreCard"></div>
  <div class="nav-dot" data-section="radarSection"></div>
  <div class="nav-dot" data-section="insightsSection"></div>
  <div class="nav-dot" data-section="trajSection"></div>
  <div class="nav-dot" data-section="ctaSection"></div>
</div>

<script src="core/HealthEngine.js"></script>
<script src="assets/js/engine.js"></script>
<script src="assets/js/otp-unlock.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   1. DATA LOADING FROM localStorage + HealthEngine Integration
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function loadData() {
  try {
    var raw = localStorage.getItem('assessmentData') || 
              sessionStorage.getItem('assessmentData') ||
              localStorage.getItem('ai_health_assessment_v2') ||
              sessionStorage.getItem('ai_health_assessment_v2');
    if (raw) {
      var parsed = JSON.parse(raw);
      // Store for HealthEngine
      window.assessmentData = parsed;
      return parsed;
    }
  } catch(e){
    console.warn('Data load error:', e);
  }
  /* Demo fallback */
  return {
    clientName:'Priya Sharma',
    age:34,
    gender:'female',
    height:163,
    weight:72,
    targetWeight:62,
    activityLevel:'light',
    sleepQuality:'inconsistent',
    stressLevel:'high',
    healthIssueMain:'has',
    health_thyroid:true,
    health_bp:false,
    health_diabetes:false,
    health_cholesterol:false,
    health_pcos:true,
    health_joint:false,
    thyroidType:'hypothyroid',
    tshLevel:'5.8',
    primaryGoal:'weight-loss',
    dietPreferences:'vegetarian',
    commitment:'4-5',
    obstacles:'Busy work schedule, irregular meals'
  };
}

var D = loadData();
window.assessmentData = D;

// Normalize age to number (critical for biological age calculation)
if (D.age) {
  D.age = parseInt(D.age, 10) || 0;
  if (isNaN(D.age) || D.age <= 0) {
    // Try to calculate from dateOfBirth if age is invalid
    if (D.dateOfBirth) {
      var dob = new Date(D.dateOfBirth);
      if (!isNaN(dob.getTime())) {
        var today = new Date();
        D.age = today.getFullYear() - dob.getFullYear();
        var monthDiff = today.getMonth() - dob.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
          D.age--;
        }
      }
    }
    // Fallback if still invalid
    if (isNaN(D.age) || D.age <= 0) D.age = 30;
  }
} else {
  D.age = 30; // Default fallback
}

// Normalize other numeric fields
if (D.height) D.height = parseFloat(D.height) || 0;
if (D.weight) D.weight = parseFloat(D.weight) || 0;
if (D.targetWeight) D.targetWeight = parseFloat(D.targetWeight) || 0;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HealthEngine Integration
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var healthEngine = null;
var intelligence = null;
var planRecommendation = null;

if (typeof window.HealthEngine !== 'undefined') {
  try {
    healthEngine = new window.HealthEngine(D);
    intelligence = healthEngine.computeAll();
    planRecommendation = intelligence.planRecommendation || null;
    // Store intelligence globally
    window.currentHealthIntelligence = intelligence;
    // Store recommended plan
    if (planRecommendation && typeof window.PLAN_CATALOG !== 'undefined') {
      var planKey = planRecommendation.planKey || 'total_wellness';
      var plan = window.PLAN_CATALOG[planKey] || window.PLAN_CATALOG.total_wellness;
      var variant = null;
      if (typeof window.getRecommendedVariant === 'function') {
        variant = window.getRecommendedVariant(D);
      }
      localStorage.setItem('recommendedPlan', JSON.stringify({
        name: plan.title,
        objective: plan.focus,
        planKey: planKey,
        duration: variant ? variant.months : 3,
        price: variant ? variant.priceINR : 19999,
        variant: variant
      }));
    }
  } catch(e) {
    console.warn('HealthEngine error:', e);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   2. CORE CALCULATIONS â€” Using HealthEngine when available
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var bmi = +(D.weight / ((D.height/100)**2)).toFixed(1);
var bmiCat = bmi<18.5?'Underweight':bmi<25?'Normal':bmi<30?'Overweight':bmi<35?'Obese I':'Obese II';

/* BMR â€” Mifflin-St Jeor */
var bmr = D.gender==='female'
  ? Math.round(10*D.weight + 6.25*D.height - 5*D.age - 161)
  : Math.round(10*D.weight + 6.25*D.height - 5*D.age + 5);

var actMult = {sedentary:1.2,light:1.375,moderate:1.55,high:1.725}[D.activityLevel]||1.375;
var tdee = Math.round(bmr * actMult);
var weightGap = +(D.weight - D.targetWeight).toFixed(1);

/* Use HealthEngine intelligence if available, otherwise fallback calculations */
var healthScore, bioDelta, bioAge, metabolicScore, recoveryScore, hormonalScore, lifestyleScore, sleepScore, stressScore, actScore;

if (intelligence && intelligence.totalScore !== undefined) {
  // Use HealthEngine data
  healthScore = Math.round(intelligence.totalScore) || 0;
  if (healthScore <= 0) healthScore = 50; // Fallback if invalid
  
  // Use corrected biological age calculation
  if (intelligence.biologicalAge !== undefined && intelligence.biologicalAge !== null) {
    bioAge = Math.round(parseFloat(intelligence.biologicalAge));
    bioDelta = intelligence.biologicalAgeDelta || (bioAge - parseFloat(D.age));
  } else {
    // Fallback: convert biologicalStrain (0-100) to age deviation
    // Max deviation: +8 years, formula: deviation = (strain / 100) * 8
    var strain = parseFloat(intelligence.biologicalStrain) || 0;
    var maxDeviation = 8;
    bioDelta = (strain / 100) * maxDeviation;
    bioAge = Math.round(parseFloat(D.age) + bioDelta);
  }
  
  // Safety clamp
  if (isNaN(bioAge) || bioAge <= 0) bioAge = D.age;
  if (bioAge > D.age + 8) bioAge = D.age + 8;
  if (bioAge < D.age - 6) bioAge = D.age - 6;
  
  // Extract dimension scores
  if (intelligence.dimensions) {
    metabolicScore = Math.round(intelligence.dimensions.metabolic || 60);
    recoveryScore = Math.round(intelligence.dimensions.recovery || 60);
    hormonalScore = Math.round(intelligence.dimensions.hormonal || 60);
    lifestyleScore = Math.round(intelligence.dimensions.behavioral || 60);
  } else {
    metabolicScore = 60;
    recoveryScore = 60;
    hormonalScore = 60;
    lifestyleScore = 60;
  }
  
  // Sub-scores for metric cards (derived from dimensions or fallback)
  sleepScore = {poor:25,inconsistent:52,good:78,restorative:95}[D.sleepQuality]||recoveryScore;
  stressScore = {'very-high':20,high:38,moderate:62,low:90}[D.stressLevel]||recoveryScore;
  actScore = {sedentary:22,light:48,moderate:75,high:92}[D.activityLevel]||metabolicScore;
  
  // Adjust if not set properly
  if (!intelligence.dimensions) {
    recoveryScore = Math.round((sleepScore*0.5 + actScore*0.3 + stressScore*0.2));
    metabolicScore = Math.round(healthScore * 0.9 + (100-bmi*0.8)*0.1);
    metabolicScore = Math.min(99,Math.max(20,metabolicScore));
    hormonalScore = D.health_thyroid||D.health_pcos ? Math.max(30,metabolicScore-18) : metabolicScore+5;
    hormonalScore = Math.min(98,hormonalScore);
    lifestyleScore = Math.round((actScore*0.4+sleepScore*0.3+stressScore*0.3));
  }
} else {
  // Fallback calculations
  function calcBioDelta() {
    var d=0;
    if(bmi<18.5) d+=1; else if(bmi>=25&&bmi<30) d+=2; else if(bmi>=30&&bmi<35) d+=4; else if(bmi>=35) d+=6;
    if(D.sleepQuality==='poor') d+=3; else if(D.sleepQuality==='inconsistent') d+=2; else if(D.sleepQuality==='restorative') d-=1;
    if(D.stressLevel==='very-high') d+=4; else if(D.stressLevel==='high') d+=3; else if(D.stressLevel==='moderate') d+=1; else if(D.stressLevel==='low') d-=1;
    if(D.activityLevel==='sedentary') d+=3; else if(D.activityLevel==='light') d+=1; else if(D.activityLevel==='moderate') d-=1; else if(D.activityLevel==='high') d-=2;
    if(D.health_diabetes) d+=3; if(D.health_thyroid) d+=2; if(D.health_pcos) d+=2; if(D.health_bp) d+=2; if(D.health_cholesterol) d+=2;
    return d;
  }
  bioDelta = calcBioDelta();
  bioAge = Math.round(parseFloat(D.age) + bioDelta);
  if (isNaN(bioAge) || bioAge <= 0) bioAge = D.age; // Safety check
  
  function calcScore() {
    var s=100;
    if(bmi<18.5||bmi>=30) s-=15; else if(bmi>=25) s-=8;
    if(D.sleepQuality==='poor') s-=15; else if(D.sleepQuality==='inconsistent') s-=8; else if(D.sleepQuality==='restorative') s+=5;
    if(D.stressLevel==='very-high') s-=15; else if(D.stressLevel==='high') s-=10; else if(D.stressLevel==='moderate') s-=5;
    if(D.activityLevel==='sedentary') s-=12; else if(D.activityLevel==='light') s-=6; else if(D.activityLevel==='high') s+=5;
    if(D.health_diabetes) s-=10; if(D.health_thyroid) s-=8; if(D.health_pcos) s-=8; if(D.health_bp) s-=8; if(D.health_cholesterol) s-=6;
    var finalScore = Math.min(100,Math.max(20,s));
    return Math.round(finalScore);
  }
  healthScore = calcScore();
  if (healthScore <= 0) healthScore = 50; // Fallback if invalid
  
  sleepScore = {poor:25,inconsistent:52,good:78,restorative:95}[D.sleepQuality]||55;
  stressScore = {'very-high':20,high:38,moderate:62,low:90}[D.stressLevel]||55;
  actScore = {sedentary:22,light:48,moderate:75,high:92}[D.activityLevel]||50;
  recoveryScore = Math.round((sleepScore*0.5 + actScore*0.3 + stressScore*0.2));
  metabolicScore = Math.round(healthScore * 0.9 + (100-bmi*0.8)*0.1);
  metabolicScore = Math.min(99,Math.max(20,metabolicScore));
  hormonalScore = D.health_thyroid||D.health_pcos ? Math.max(30,metabolicScore-18) : metabolicScore+5;
  hormonalScore = Math.min(98,hormonalScore);
  lifestyleScore = Math.round((actScore*0.4+sleepScore*0.3+stressScore*0.3));
}

// Store health score globally
localStorage.setItem('healthScore', JSON.stringify({
  total: healthScore,
  metabolic: metabolicScore,
  recovery: recoveryScore,
  hormonal: hormonalScore,
  behavioral: lifestyleScore
}));

/* Status helper */
function getStatus(s){
  if(s>=80) return {label:'Optimal',cls:'green'};
  if(s>=65) return {label:'Good',cls:'cyan'};
  if(s>=48) return {label:'Moderate',cls:'amber'};
  return {label:'Low',cls:'red'};
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   3. BACKGROUND CANVAS â€” DNA particle helix
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function(){
  var cv=document.getElementById('bg-canvas'),ctx=cv.getContext('2d');
  var W,H,particles;
  function resize(){W=cv.width=innerWidth;H=cv.height=innerHeight;}
  function mkP(){return{x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.6+0.3,vx:(Math.random()-.5)*.15,vy:(Math.random()-.5)*.1,op:Math.random()*.4+.08,hue:Math.random()>.55?195:160};}
  function drawHelix(t){
    for(var ci=0;ci<5;ci++) for(var ri=0;ri<3;ri++){
      var ox=(ci/5)*W+(W/5)*.2, oy=(ri/3)*H+(H/3)*.25, len=140+ri*30, fr=.028+ci*.004, ph=t*.38+ci*1.2+ri*.8;
      ctx.save();ctx.translate(ox,oy);ctx.rotate(-.3+ci*.1);
      ctx.beginPath();for(var s=0;s<len;s+=4){var px=s-len/2,py=Math.sin(px*fr+ph)*26;s?ctx.lineTo(px,py):ctx.moveTo(px,py);}
      ctx.strokeStyle='rgba(0,180,255,.07)';ctx.lineWidth=1.1;ctx.stroke();
      ctx.beginPath();for(var s=0;s<len;s+=4){var px=s-len/2,py=Math.sin(px*fr+ph+Math.PI)*26;s?ctx.lineTo(px,py):ctx.moveTo(px,py);}
      ctx.strokeStyle='rgba(0,184,122,.06)';ctx.lineWidth=1.1;ctx.stroke();
      for(var s=0;s<len;s+=20){var px=s-len/2,pA=Math.sin(px*fr+ph)*26,pB=Math.sin(px*fr+ph+Math.PI)*26;ctx.beginPath();ctx.moveTo(px,pA);ctx.lineTo(px,pB);ctx.strokeStyle='rgba(0,212,255,.045)';ctx.lineWidth=.7;ctx.stroke();}
      ctx.restore();
    }
  }
  var t=0;
  function tick(){
    ctx.clearRect(0,0,W,H);t+=.012;
    var g=ctx.createRadialGradient(W*.45,H*.38,0,W*.45,H*.38,W*.75);
    g.addColorStop(0,'rgba(13,33,71,.97)');g.addColorStop(.55,'rgba(10,22,40,.99)');g.addColorStop(1,'rgba(5,10,22,1)');
    ctx.fillStyle=g;ctx.fillRect(0,0,W,H);
    drawHelix(t);
    particles.forEach(function(p){
      p.x+=p.vx;p.y+=p.vy;
      if(p.x<-4)p.x=W+4;if(p.x>W+4)p.x=-4;if(p.y<-4)p.y=H+4;if(p.y>H+4)p.y=-4;
      ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      ctx.fillStyle=p.hue===195?'rgba(0,212,255,'+p.op+')':'rgba(0,184,122,'+p.op+')';ctx.fill();
    });
    requestAnimationFrame(tick);
  }
  addEventListener('resize',resize);
  resize();particles=Array.from({length:90},mkP);tick();
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   4. LOADING SEQUENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function(){
  var texts=[
    'Scanning biometric signalsâ€¦',
    'Calculating biological ageâ€¦',
    'Mapping metabolic pathwaysâ€¦',
    'Generating health scoreâ€¦',
    'Personalising insightsâ€¦',
    'Report ready âœ“'
  ];
  var bar=document.getElementById('loaderBar');
  var txt=document.getElementById('loaderText');
  var sub=document.getElementById('loaderSub');
  var pct=0,step=0;
  var iv=setInterval(function(){
    pct+=Math.random()*18+8;
    if(pct>100) pct=100;
    bar.style.width=pct+'%';
    step=Math.floor(pct/20);
    if(step<texts.length) txt.textContent=texts[step];
    if(pct>=100){
      clearInterval(iv);
      setTimeout(function(){
        var ls=document.getElementById('loadingScreen');
        if(ls) ls.style.opacity='0';
        setTimeout(function(){
          if(ls) ls.style.display='none';
          var pageWrap = document.getElementById('pageWrap');
          if(pageWrap) pageWrap.style.display='block';
          initDashboard();
          // OTP unlock script will handle overlay visibility
        },600);
      },400);
    }
  },220);
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   OTP UNLOCK INTEGRATION â€” Reveal dashboard after verification
   (otp-unlock.js handles the main logic, this ensures sync)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   5. DASHBOARD INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initDashboard(){
  fillStaticContent();
  buildMetricCards();
  buildRadar();
  buildRiskGrid();
  buildInsights();
  buildTrajectory();
  buildCTA();
  initAnimations();
  initScrollSpy();
  /* scan bar */
  setTimeout(function(){document.getElementById('scanBar').style.width='100%';},300);
}

/* â”€â”€â”€ STATIC CONTENT â”€â”€â”€ */
function fillStaticContent(){
  /* hero */
  var firstName = (D.clientName||'').split(' ')[0] || 'User';
  document.getElementById('heroName').textContent = firstName;
  
  /* Data points count */
  var dataPoints = 0;
  if (D.weight) dataPoints += 1;
  if (D.height) dataPoints += 1;
  if (D.age) dataPoints += 1;
  if (D.activityLevel) dataPoints += 1;
  if (D.sleepQuality) dataPoints += 1;
  if (D.stressLevel) dataPoints += 1;
  if (D.primaryGoal) dataPoints += 1;
  if (D.commitment) dataPoints += 1;
  if (D.health_thyroid) dataPoints += 1;
  if (D.health_pcos) dataPoints += 1;
  if (D.health_diabetes) dataPoints += 1;
  if (D.health_bp) dataPoints += 1;
  if (D.health_cholesterol) dataPoints += 1;
  if (D.health_joint) dataPoints += 1;
  if (D.dietPreferences) dataPoints += 1;
  if (D.obstacles) dataPoints += 1;
  if (D.targetWeight) dataPoints += 1;
  if (intelligence && intelligence.mlFeatures) {
    dataPoints = Object.keys(intelligence.mlFeatures).length || dataPoints;
  }
  document.getElementById('heroDataPoints').textContent = dataPoints || 24;

  /* stats strip */
  document.getElementById('statBmi').textContent = bmi;
  document.getElementById('statBmiCat').textContent = bmiCat;
  document.getElementById('statBmr').textContent = bmr;
  document.getElementById('statTdee').textContent = tdee;
  var wg = weightGap > 0 ? weightGap + ' kg to lose' : Math.abs(weightGap) + ' kg to gain';
  document.getElementById('statWeightGap').textContent = Math.abs(weightGap);
  document.getElementById('statWeightGapLabel').textContent = weightGap > 0 ? 'kg to lose' : 'kg to gain';

  /* Bio age - ensure values are numbers */
  var bioAgeNum = Math.round(parseFloat(bioAge)) || D.age;
  var chronoAgeNum = Math.round(parseFloat(D.age)) || 30;
  if (isNaN(bioAgeNum) || bioAgeNum <= 0) bioAgeNum = chronoAgeNum;
  if (isNaN(chronoAgeNum) || chronoAgeNum <= 0) chronoAgeNum = 30;
  
  animateCount(document.getElementById('bioAgeNum'), 0, bioAgeNum, 1800, true);
  animateCount(document.getElementById('chronoAgeNum'), 0, chronoAgeNum, 1600, true);
  var badge = document.getElementById('bioDeltaBadge');
  var msg = document.getElementById('bioDeltaMsg');
  var normalizedBioDelta = parseFloat(bioDelta) || 0;
  if (isNaN(normalizedBioDelta)) normalizedBioDelta = 0;
  
  if(normalizedBioDelta > 0){
    badge.className='bio-delta-badge warn';
    badge.textContent = 'â†‘ ' + Math.round(normalizedBioDelta) + ' years older than actual age';
    msg.textContent = 'Your body is ageing faster than expected. Intervention will reverse this.';
  } else if(normalizedBioDelta < 0){
    badge.className='bio-delta-badge ok';
    badge.textContent = 'â†“ ' + Math.round(Math.abs(normalizedBioDelta)) + ' years younger than actual age';
    msg.textContent = 'Excellent! Your body is ageing slower than expected.';
  } else {
    badge.className='bio-delta-badge ok';
    badge.textContent = 'Aligned with chronological age';
    msg.textContent = 'Your biological and chronological ages are in sync.';
  }

  /* Arch gauge - ensure healthScore is valid */
  var validHealthScore = Math.round(parseFloat(healthScore)) || 50;
  if (isNaN(validHealthScore) || validHealthScore <= 0) validHealthScore = 50;
  if (validHealthScore > 100) validHealthScore = 100;
  
  var st = getStatus(validHealthScore);
  document.getElementById('archScoreNum').textContent = validHealthScore;
  document.getElementById('archScoreStatus').setAttribute('fill', st.cls==='green'?'var(--green)':st.cls==='cyan'?'var(--cyan)':st.cls==='amber'?'var(--amber)':'var(--red)');
  document.getElementById('archScoreStatus').textContent = st.label;

  var metaAge = Math.round(chronoAgeNum + (normalizedBioDelta * 0.7));
  if (isNaN(metaAge) || metaAge <= 0) metaAge = chronoAgeNum;
  document.getElementById('sfcMetaAge').textContent = metaAge + ' yrs';
  document.getElementById('sfcRecovery').textContent = recoveryScore + '%';
  document.getElementById('sfcLifestyle').textContent = lifestyleScore + '%';

  /* Radar center */
  document.getElementById('radarScore').textContent = validHealthScore;
  document.getElementById('radarScore').textContent = validHealthScore;
}

/* â”€â”€â”€ COUNTER ANIMATION â”€â”€â”€ */
function animateCount(el, from, to, dur, integer){
  var start=null;
  function step(ts){
    if(!start) start=ts;
    var prog=Math.min((ts-start)/dur,1);
    var ease=1-Math.pow(1-prog,3);
    var val=from+(to-from)*ease;
    el.textContent = integer ? Math.round(val) : val.toFixed(1);
    if(prog<1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

/* â”€â”€â”€ METRIC CARDS â”€â”€â”€ */
function buildMetricCards(){
  var cards=[
    {icon:'ğŸ”¥',iconCls:'cyan',label:'Metabolic Efficiency',score:metabolicScore,color:getColor(metabolicScore),desc:getMetaDesc(),badgeText:getStatus(metabolicScore).label},
    {icon:'ğŸ˜´',iconCls:'green',label:'Sleep Quality',score:sleepScore,color:getColor(sleepScore),desc:getSleepDesc(),badgeText:getStatus(sleepScore).label},
    {icon:'ğŸ§ ',iconCls:'amber',label:'Stress Index',score:stressScore,color:getColor(stressScore),desc:getStressDesc(),badgeText:getStatus(stressScore).label},
    {icon:'ğŸƒ',iconCls:'cyan',label:'Activity Output',score:actScore,color:getColor(actScore),desc:getActDesc(),badgeText:getStatus(actScore).label},
    {icon:'ğŸ”‹',iconCls:'green',label:'Recovery Load',score:recoveryScore,color:getColor(recoveryScore),desc:'Composite capacity across sleep, stress and activity patterns.',badgeText:getStatus(recoveryScore).label},
    {icon:'âš—ï¸',iconCls:'amber',label:'Hormonal Stability',score:hormonalScore,color:getColor(hormonalScore),desc:getHormonalDesc(),badgeText:getStatus(hormonalScore).label},
  ];
  var g=document.getElementById('metricsGrid');
  cards.forEach(function(c,i){
    var d=document.createElement('div');
    d.className='glass metric-card will-animate';
    d.innerHTML='<div class="mc-icon '+c.iconCls+'">'+c.icon+'</div>'+
      '<div class="mc-label">'+c.label+'</div>'+
      '<div class="mc-score '+c.color+'">'+c.score+'<span style="font-size:14px;opacity:.6">%</span></div>'+
      '<div class="mini-arc-wrap"><div class="mini-arc-track"><div class="mini-arc-fill '+c.color+'" data-v="'+c.score+'" style="width:0%"></div></div></div>'+
      '<div class="mc-desc">'+c.desc+'</div>'+
      '<div class="mc-badge '+getBadgeCls(c.score)+'">'+c.badgeText+'</div>';
    g.appendChild(d);
  });
}

function getColor(s){return s>=75?'green':s>=55?'cyan':s>=38?'amber':'red';}
function getBadgeCls(s){return s>=75?'ok':s>=50?'warn':'bad';}
function getMetaDesc(){return bmi>=25?'Metabolic efficiency reduced by body composition. Insulin regulation may be suboptimal.':'Metabolic pathways operating within normal range.';}
function getSleepDesc(){
  var m={poor:'Critical sleep deficit detected. Cortisol and ghrelin imbalance likely.',inconsistent:'Inconsistent sleep is disrupting hormonal reset cycles.',good:'Sleep patterns support adequate recovery.',restorative:'Exceptional sleep quality enhancing cellular repair.'};
  return m[D.sleepQuality]||'Sleep data recorded.';
}
function getStressDesc(){
  var m={'very-high':'Chronic stress elevating cortisol, disrupting fat metabolism and immunity.',high:'Elevated stress markers may impair digestion and hormonal balance.',moderate:'Moderate stress â€” manageable but monitor carefully.',low:'Excellent stress regulation supporting hormonal health.'};
  return m[D.stressLevel]||'Stress data recorded.';
}
function getActDesc(){
  var m={sedentary:'Minimal movement detected. Metabolic rate suppressed.',light:'Light activity â€” above baseline, but significant room for improvement.',moderate:'Solid activity foundation â€” supporting cardiovascular health.',high:'High-performance activity output. Excellent metabolic support.'};
  return m[D.activityLevel]||'Activity data recorded.';
}
function getHormonalDesc(){
  if(D.health_thyroid) return D.thyroidType==='hypothyroid'?'Hypothyroid detected â€” TSH: '+D.tshLevel+' mIU/L. Metabolism significantly slowed.':'Hyperthyroid pattern â€” metabolic rate abnormally elevated.';
  if(D.health_pcos) return 'PCOS signals detected. Insulin resistance and androgen imbalance affecting metabolic efficiency.';
  return 'Hormonal profile within acceptable parameters. Continue monitoring.';
}

/* â”€â”€â”€ ARCH GAUGE â”€â”€â”€ */
function buildArchGauge(score){
  /* Arc: cx=240,cy=240,r=140. M100,240 A140,140 0 0 1 380,240 */
  var ARC=Math.PI*140; /* ~439.8 */
  var fill=score/100;
  var offset=ARC*(1-fill);
  var archFill=document.getElementById('archFill');
  archFill.style.strokeDasharray=ARC;
  archFill.style.strokeDashoffset=ARC;
  setTimeout(function(){
    archFill.style.transition='stroke-dashoffset 2s cubic-bezier(.4,0,.2,1)';
    archFill.style.strokeDashoffset=offset;
  },400);

  /* Draw ticks */
  var NS='http://www.w3.org/2000/svg';
  var tg=document.getElementById('archTicks');
  [0,.25,.5,.75,1].forEach(function(t){
    var angle=Math.PI*(1-t);
    var ix=240+140*Math.cos(angle), iy=240-140*Math.sin(angle);
    var ox=240+162*Math.cos(angle), oy=240-162*Math.sin(angle);
    var line=document.createElementNS(NS,'line');
    line.setAttribute('x1',ix);line.setAttribute('y1',iy);line.setAttribute('x2',ox);line.setAttribute('y2',oy);
    line.setAttribute('stroke','rgba(0,212,255,.18)');line.setAttribute('stroke-width','1.5');
    tg.appendChild(line);
    var lx=240+175*Math.cos(angle), ly=240-175*Math.sin(angle);
    var lbl=document.createElementNS(NS,'text');
    lbl.setAttribute('x',lx);lbl.setAttribute('y',ly);
    lbl.setAttribute('text-anchor','middle');lbl.setAttribute('dominant-baseline','middle');
    lbl.setAttribute('font-family',"'Outfit',sans-serif");lbl.setAttribute('font-size','10');
    lbl.setAttribute('fill','rgba(180,200,240,.35)');
    lbl.textContent=Math.round(t*100);
    tg.appendChild(lbl);
  });

  /* Needle */
  setTimeout(function(){
    var needle=document.getElementById('archNeedle');
    var ndot=document.getElementById('needleDot');
    needle.style.opacity='1';ndot.style.opacity='1';
    /* Needle angle: score=0 â†’ left (180Â°), score=100 â†’ right (0Â°) */
    var angle=180 - score*1.8; /* degrees, 0=100, 180=0 */
    gsap.fromTo(needle,{attr:{transform:'rotate(0,240,240)'}},{attr:{transform:'rotate('+angle+',240,240)'},duration:2,ease:'power2.out',delay:.5});
    gsap.fromTo(ndot,{attr:{transform:'rotate(0,240,240)'}},{attr:{transform:'rotate('+angle+',240,240)'},duration:2,ease:'power2.out',delay:.5});
  },600);

  /* Score counter */
  var el=document.getElementById('archScoreNum');
  setTimeout(function(){animateCount(el,0,score,1800,true);},800);
}

/* â”€â”€â”€ RADAR â”€â”€â”€ */
function buildRadar(){
  var NS='http://www.w3.org/2000/svg';
  var cx=150,cy=150,mr=110;
  var rawAxes=[
    {l:'Metabolic',v:metabolicScore/100},
    {l:'Sleep',v:sleepScore/100},
    {l:'Stress',v:stressScore/100},
    {l:'Activity',v:actScore/100},
    {l:'Recovery',v:recoveryScore/100},
    {l:'Hormonal',v:hormonalScore/100}
  ];
  var N=rawAxes.length;
  var ang=function(i){return (i/N)*Math.PI*2-Math.PI/2;};
  var pt=function(i,r){return{x:cx+r*Math.cos(ang(i)),y:cy+r*Math.sin(ang(i))};};

  /* rings */
  var rg=document.getElementById('rRings');
  [.2,.4,.6,.8,1].forEach(function(f){
    var poly=document.createElementNS(NS,'polygon');
    poly.setAttribute('points',rawAxes.map(function(_,i){var p=pt(i,mr*f);return p.x+','+p.y;}).join(' '));
    poly.classList.add('radar-ring');rg.appendChild(poly);
  });

  /* spokes */
  var sg=document.getElementById('rSpokes');
  rawAxes.forEach(function(_,i){
    var o=pt(i,mr);
    var line=document.createElementNS(NS,'line');
    line.setAttribute('x1',cx);line.setAttribute('y1',cy);line.setAttribute('x2',o.x);line.setAttribute('y2',o.y);
    line.classList.add('radar-spoke');sg.appendChild(line);
  });

  /* labels */
  var lg=document.getElementById('rLabels');
  rawAxes.forEach(function(ax,i){
    var p=pt(i,mr+24);
    var t=document.createElementNS(NS,'text');
    t.setAttribute('x',p.x);t.setAttribute('y',p.y);
    t.setAttribute('text-anchor',Math.abs(p.x-cx)<5?'middle':p.x<cx?'end':'start');
    t.classList.add('radar-axis-label');t.textContent=ax.l;lg.appendChild(t);
  });

  /* polygon */
  var poly=document.getElementById('radarPoly');
  var coords=rawAxes.map(function(ax,i){return pt(i,mr*ax.v);});
  poly.setAttribute('points',coords.map(function(p){return p.x+','+p.y;}).join(' '));
  var peri=0;coords.forEach(function(p,i){var n=coords[(i+1)%N];peri+=Math.hypot(n.x-p.x,n.y-p.y);});
  poly.style.strokeDasharray=peri;poly.style.strokeDashoffset=peri;

  /* vertices */
  var vg=document.getElementById('rVerts');
  var dots=coords.map(function(p){
    var c=document.createElementNS(NS,'circle');
    c.setAttribute('cx',p.x);c.setAttribute('cy',p.y);c.setAttribute('r','3');c.classList.add('radar-vert');
    vg.appendChild(c);return c;
  });

  /* tracer */
  var tracer=document.getElementById('tracerDot');
  tracer.setAttribute('cx',coords[0].x);tracer.setAttribute('cy',coords[0].y);

  setTimeout(function(){
    poly.style.transition='stroke-dashoffset 1.8s cubic-bezier(.4,0,.2,1)';
    poly.style.strokeDashoffset='0';
    dots.forEach(function(d,i){setTimeout(function(){d.classList.add('show');},i*280);});
    setTimeout(function(){
      tracer.style.opacity='1';
      var tl=gsap.timeline({repeat:-1});
      coords.forEach(function(p,i){
        var n=coords[(i+1)%N],seg=Math.hypot(n.x-p.x,n.y-p.y);
        tl.to(tracer,{attr:{cx:n.x,cy:n.y},duration:(seg/peri)*2.8,ease:'none'});
      });
    },2200);
  },1000);

  /* bio bars */
  var bars=[
    {name:'Metabolic',v:metabolicScore,cls:'green'},
    {name:'Sleep',v:sleepScore,cls:'cyan'},
    {name:'Stress',v:stressScore,cls:stressScore>=55?'green':'amber'},
    {name:'Activity',v:actScore,cls:actScore>=55?'green':'amber'},
    {name:'Recovery',v:recoveryScore,cls:recoveryScore>=55?'cyan':'amber'},
  ];
  var bb=document.getElementById('bioBars');
  bars.forEach(function(b){
    var r=document.createElement('div');r.className='bio-bar-row';
    r.innerHTML='<div class="bio-bar-hd"><span class="bio-bar-name">'+b.name+'</span><span class="bio-bar-val '+b.cls+'">'+b.v+'%</span></div>'+
      '<div class="bio-bar-track"><div class="bio-bar-fill '+b.cls+'" data-v="'+b.v+'" style="width:0%"></div></div>';
    bb.appendChild(r);
  });
}

/* â”€â”€â”€ RISK GRID â”€â”€â”€ */
function buildRiskGrid(){
  var NS='http://www.w3.org/2000/svg';
  var systems=[
    {icon:'â¤ï¸',name:'Cardiovascular',score:D.health_bp||D.health_cholesterol?45:78},
    {icon:'ğŸ§¬',name:'Metabolic',score:D.health_diabetes?38:metabolicScore},
    {icon:'âš—ï¸',name:'Hormonal',score:D.health_thyroid||D.health_pcos?40:hormonalScore},
    {icon:'ğŸ§ ',name:'Neurological',score:stressScore>=60?70:52},
    {icon:'ğŸ¦´',name:'Musculoskeletal',score:D.health_joint?35:bmi>=30?55:75},
    {icon:'ğŸ’§',name:'Digestive',score:D.activityLevel==='sedentary'?50:68},
    {icon:'ğŸ«',name:'Respiratory',score:bmi>=30?55:80},
    {icon:'ğŸ›¡ï¸',name:'Immunity',score:Math.round((sleepScore+stressScore)/2)},
  ];
  var g=document.getElementById('riskGrid');
  systems.forEach(function(s){
    var st=getStatus(s.score);
    var circ=2*Math.PI*24; /* r=24 â†’ ~150.8 */
    var offset=circ*(1-s.score/100);
    var d=document.createElement('div');d.className='risk-col';
    d.innerHTML='<span class="risk-col-icon">'+s.icon+'</span>'+
      '<span class="risk-col-name">'+s.name+'</span>'+
      '<div class="risk-circle-wrap">'+
        '<svg viewBox="0 0 56 56"><circle class="risk-circle-track" cx="28" cy="28" r="24"/><circle class="risk-circle-fill '+st.cls+'" cx="28" cy="28" r="24" data-offset="'+offset+'" style="stroke-dashoffset:'+circ+'"/></svg>'+
        '<div class="risk-pct" style="color:var(--'+st.cls+')" >'+s.score+'%</div>'+
      '</div>'+
      '<span class="risk-status-badge '+st.cls+'">'+st.label+'</span>';
    g.appendChild(d);
  });
}

/* â”€â”€â”€ INSIGHTS â”€â”€â”€ */
function buildInsights(){
  var name=(D.clientName||'').split(' ')[0]||'User';
  var lines=[];
  lines.push('Based on your assessment, <b>'+name+'</b>, your Genie AI health intelligence engine has identified key biological patterns across metabolic, hormonal, and lifestyle domains.');
  if(bmi>=25){lines.push('Your current BMI of <b>'+bmi+'</b> ('+bmiCat+') is driving systemic inflammation and metabolic resistance. This is the primary contributor to your accelerated biological ageing.');}
  if(D.sleepQuality==='poor'||D.sleepQuality==='inconsistent'){lines.push('Your <b>disrupted sleep pattern</b> is significantly impairing growth hormone release and cortisol regulation â€” both critical drivers of fat metabolism and immune resilience.');}
  if(D.stressLevel==='high'||D.stressLevel==='very-high'){lines.push('Elevated <b>chronic stress</b> is keeping cortisol persistently raised, which suppresses fat oxidation, increases visceral adiposity, and accelerates cellular ageing.');}
  if(D.health_thyroid){lines.push('Your <b>thyroid dysregulation</b> (TSH: '+D.tshLevel+' mIU/L) is slowing metabolic rate and making conventional diet strategies ineffective without clinical recalibration.');}
  if(D.health_pcos){lines.push('<b>PCOS-related hormonal imbalance</b> is causing insulin resistance and androgen excess â€” both of which require specialised nutritional and hormonal protocols.');}
  if(D.health_diabetes){lines.push('Your <b>metabolic glucose handling</b> requires structured intervention. HbA1c patterns suggest lifestyle-addressable insulin resistance that responds well to structured programmes.');}
  if(D.health_bp){lines.push('Elevated <b>blood pressure</b> markers indicate cardiovascular strain, likely worsened by sodium-dominant diet and low physical output.');}
  lines.push('Your projected outcome with structured intervention: <b>biological age reversal of '+Math.round(Math.abs(bioDelta)*0.65)+' years</b> within 12 weeks, alongside a health score improvement to <b>'+Math.min(98,healthScore+Math.round(bioDelta*1.8))+'</b>.');
  document.getElementById('insightText').innerHTML=lines.join('<br><br>');

  /* chips */
  var chips=document.getElementById('conditionChips');
  var conds=[];
  if(D.health_diabetes) conds.push({cls:'diabetes',label:'ğŸ©¸ Diabetes'});
  if(D.health_thyroid) conds.push({cls:'thyroid',label:'âš—ï¸ Thyroid'});
  if(D.health_pcos) conds.push({cls:'pcos',label:'ğŸ§¬ PCOS'});
  if(D.health_bp) conds.push({cls:'bp',label:'â¤ï¸ High BP'});
  if(D.health_cholesterol) conds.push({cls:'cholesterol',label:'ğŸ’› Cholesterol'});
  if(D.health_joint) conds.push({cls:'joint',label:'ğŸ¦´ Joint Pain'});
  if(conds.length===0) conds.push({cls:'cholesterol',label:'âœ… No active conditions'});
  conds.forEach(function(c){
    var s=document.createElement('span');s.className='cond-chip '+c.cls;s.textContent=c.label;chips.appendChild(s);
  });
}

/* â”€â”€â”€ TRAJECTORY SVG â”€â”€â”€ */
function buildTrajectory(){
  /* Points: x=0â†’840 (week 0 to 12), y=30â†’230 */
  var NS='http://www.w3.org/2000/svg';
  var x0=40,x1=840,yTop=30,yBot=220;
  var weeks=13;

  /* Grid */
  var gg=document.getElementById('trajGrid');
  for(var i=0;i<=weeks-1;i++){
    var x=x0+(x1-x0)*(i/(weeks-1));
    var line=document.createElementNS(NS,'line');
    line.setAttribute('x1',x);line.setAttribute('y1',yTop);line.setAttribute('x2',x);line.setAttribute('y2',yBot);
    line.setAttribute('stroke','rgba(0,212,255,.05)');line.setAttribute('stroke-width','1');
    gg.appendChild(line);
  }

  /* Weight curve: start at current weight, target with Unlimitr, plateau without */
  var wCur=D.weight, wTgt=D.targetWeight;
  var wDrop=wCur-wTgt;
  /* Green path: adaptive weight loss */
  var gPts=[], rPts=[];
  for(var i=0;i<=12;i++){
    var p=i/12;
    var y_green=yBot-(yBot-yTop-20)*(1-Math.exp(-3.5*p)); /* fast then slow */
    var y_red=yBot-(yBot-yTop-20)*(p*0.22); /* slow plateau */
    gPts.push([x0+(x1-x0)*(i/12), y_green]);
    rPts.push([x0+(x1-x0)*(i/12), y_red]);
  }
  function pts2path(pts){
    var d='M'+pts[0][0]+','+pts[0][1];
    for(var i=1;i<pts.length;i++){
      var cp=[(pts[i-1][0]+pts[i][0])/2, pts[i-1][1]];
      var cp2=[(pts[i-1][0]+pts[i][0])/2, pts[i][1]];
      d+=' C'+cp[0]+','+cp[1]+' '+cp2[0]+','+cp2[1]+' '+pts[i][0]+','+pts[i][1];
    }
    return d;
  }
  function pts2fill(pts,yClose){
    var d=pts2path(pts);
    d+=' L'+pts[pts.length-1][0]+','+yClose+' L'+pts[0][0]+','+yClose+' Z';
    return d;
  }
  var gl=document.getElementById('trajGreenLine');
  var gf=document.getElementById('trajGreenFill');
  var rl=document.getElementById('trajRedLine');
  var rf=document.getElementById('trajRedFill');
  gl.setAttribute('d',pts2path(gPts));
  gf.setAttribute('d',pts2fill(gPts,yBot));
  rl.setAttribute('d',pts2path(rPts));
  rf.setAttribute('d',pts2fill(rPts,yBot));

  /* Animate paths */
  function animatePath(el,delay){
    var len=el.getTotalLength?el.getTotalLength():1000;
    el.style.strokeDasharray=len;el.style.strokeDashoffset=len;
    setTimeout(function(){
      el.style.transition='stroke-dashoffset 2.2s cubic-bezier(.4,0,.2,1)';
      el.style.strokeDashoffset='0';
    },delay);
  }
  setTimeout(function(){animatePath(gl,0);animatePath(rl,400);},600);

  /* Milestones */
  var ms=document.getElementById('trajMilestones');
  [[2,'Energy boost'],[4,'Metabolic reset'],[8,'Visible results'],[12,'Transformation']].forEach(function(m){
    var xi=x0+(x1-x0)*(m[0]/12);
    var yi=gPts[m[0]][1];
    var c=document.createElementNS(NS,'circle');
    c.setAttribute('cx',xi);c.setAttribute('cy',yi);c.setAttribute('r','5');
    c.setAttribute('fill','var(--green)');c.setAttribute('filter','url(#lineGlow2)');
    c.style.opacity='0';
    setTimeout(function(c2){c2.style.transition='opacity .5s ease';c2.style.opacity='1';},800+m[0]*200,c);
    ms.appendChild(c);
    var t=document.createElementNS(NS,'text');
    t.setAttribute('x',xi);t.setAttribute('y',yi-12);t.setAttribute('text-anchor','middle');
    t.setAttribute('font-family',"'Outfit',sans-serif");t.setAttribute('font-size','9.5');
    t.setAttribute('fill','rgba(0,184,122,.8)');t.textContent='Wk '+m[0];
    ms.appendChild(t);
  });

  /* Cards text */
  var lossEst = Math.min(wDrop, Math.round(wDrop*0.55));
  document.getElementById('trajDangerText').textContent =
    'Without structured intervention: continued metabolic adaptation, hormonal imbalance, and '+(D.health_thyroid||D.health_pcos?'condition progression':'gradual weight regain')+'. Projected net loss over 12 weeks: less than '+(Math.round(lossEst*0.25)||1)+' kg with significant plateau risk.';
  document.getElementById('trajSuccessText').textContent =
    'With your personalised Unlimitr programme: AI-calibrated nutrition, condition-specific protocols, and weekly recalibration. Projected outcome: '+lossEst+' kg reduction, biological age improvement of '+Math.round(Math.abs(bioDelta)*0.6)+' years, and health score rise to '+Math.min(98,healthScore+Math.round(bioDelta*1.8))+'.';
}

/* â”€â”€â”€ CTA â”€â”€â”€ */
function buildCTA(){
  var plan='Personalised Wellness Plan';
  var btnText='ğŸš€ Unlock My Plan';
  var headingSpan='Your Transformation Blueprint Is Ready';
  
  // Use engine.js functions for plan recommendation
  var storedPlan = null;
  if (typeof window.recommendPlan === 'function' && typeof window.PLAN_CATALOG !== 'undefined') {
    try {
      var planResult = window.recommendPlan(D);
      var planKey = planResult.fitstartKey || 'total_wellness';
      var planData = window.PLAN_CATALOG[planKey] || window.PLAN_CATALOG.total_wellness;
      plan = planData.title || plan;
      
      // Get variant for pricing
      var variant = null;
      if (typeof window.getRecommendedVariant === 'function') {
        variant = window.getRecommendedVariant(D);
        if (variant && variant.label) {
          plan = variant.label;
        }
      }
      
      // Store plan for solution page
      storedPlan = {
        name: planData.title,
        objective: planData.focus,
        planKey: planKey,
        duration: variant ? variant.months : (planRecommendation ? planRecommendation.duration : 3),
        price: variant ? variant.priceINR : 19999,
        variant: variant,
        planResult: planResult
      };
    } catch(e) {
      console.warn('Plan recommendation error:', e);
    }
  } else {
    // Fallback logic
    if(D.health_diabetes||D.health_thyroid||D.health_pcos||D.health_bp){
      plan='Medical Supervised Transformation Plan';
      btnText='ğŸ©º Start Medical Plan';
    } else if(bmi>=30){
      plan='Intensive Metabolic Reset Programme';
      btnText='ğŸ”¥ Start Metabolic Reset';
    }
  }
  
  if(bioDelta>3) headingSpan='Start Reversing Your Biological Clock';
  
  var ctaPlanBadge = document.getElementById('ctaPlanBadge');
  var ctaHeadingSpan = document.getElementById('ctaHeadingSpan');
  var ctaPrimary = document.getElementById('ctaPrimary');
  var ctaSubText = document.getElementById('ctaSubText');
  
  if(ctaPlanBadge) ctaPlanBadge.textContent=plan;
  if(ctaHeadingSpan) ctaHeadingSpan.textContent=headingSpan;
  if(ctaPrimary) {
    ctaPrimary.textContent=btnText;
    ctaPrimary.href='solution/offer-upgraded.html';
  }
  
  var projectedScore = Math.min(98, healthScore + Math.round(Math.abs(bioDelta)*1.8));
  var sub='Your Genie AI report has identified a clear, structured path to reduce your biological age by '+Math.round(Math.abs(bioDelta)*0.6)+' years and improve your health score from '+healthScore+' to '+projectedScore+'. Doctor-led, AI-calibrated, personalised to you.';
  if(ctaSubText) ctaSubText.textContent=sub;
  
  // Store recommended plan for solution page
  if (storedPlan) {
    try {
      localStorage.setItem('recommendedPlan', JSON.stringify(storedPlan));
    } catch(e) {
      console.warn('Failed to store plan:', e);
    }
  } else {
    // Fallback plan storage
    try {
      var fallbackPlan = {
        name: plan,
        objective: 'Structured health transformation',
        duration: 3,
        price: 19999
      };
      localStorage.setItem('recommendedPlan', JSON.stringify(fallbackPlan));
    } catch(e) {}
  }
  
  // Update CTA links to offer-upgraded page
  var ctaLinks = document.querySelectorAll('#ctaPrimary, .cta-btns .btn-primary, .cta-btns .btn-outline');
  ctaLinks.forEach(function(link){
    if(link.href && (link.href.indexOf('offer.html') >= 0 || link.href.indexOf('solution.html') >= 0 || !link.href || link.href === '#')) {
      link.href = 'solution/offer-upgraded.html';
    }
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   6. GSAP ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initAnimations(){
  gsap.registerPlugin(ScrollTrigger);

  /* Bio age card */
  gsap.to('#bioAgeCard',{opacity:1,y:0,duration:.8,ease:'power2.out',delay:.2,
    onComplete:function(){
      /* trigger counter after reveal */
    }
  });

  /* Score card */
  gsap.to('#scoreCard',{opacity:1,y:0,duration:.8,ease:'power2.out',delay:.4,
    onComplete:function(){
      var validHealthScore = Math.round(parseFloat(healthScore)) || 50;
      if (isNaN(validHealthScore) || validHealthScore <= 0) validHealthScore = 50;
      if (validHealthScore > 100) validHealthScore = 100;
      buildArchGauge(validHealthScore);
    }
  });

  /* Metric cards stagger */
  gsap.to('.metric-card',{opacity:1,y:0,duration:.6,stagger:.1,ease:'power2.out',
    scrollTrigger:{trigger:'#metricsGrid',start:'top 80%',once:true},
    onComplete:function(){
      document.querySelectorAll('.mini-arc-fill').forEach(function(f){
        f.style.width=f.dataset.v+'%';
      });
    }
  });

  /* Will-animate sections */
  document.querySelectorAll('.will-animate').forEach(function(el){
    gsap.to(el,{opacity:1,y:0,duration:.7,ease:'power2.out',
      scrollTrigger:{trigger:el,start:'top 82%',once:true}
    });
  });

  /* Stats strip */
  gsap.to('#statsStrip',{opacity:1,y:0,duration:.7,ease:'power2.out',delay:.1,
    scrollTrigger:{trigger:'#statsStrip',start:'top 88%',once:true}
  });

  /* Radar section */
  gsap.to('#radarSection',{opacity:1,y:0,duration:.7,ease:'power2.out',
    scrollTrigger:{trigger:'#radarSection',start:'top 80%',once:true},
    onComplete:function(){
      document.querySelectorAll('.bio-bar-fill').forEach(function(f){
        f.style.width=f.dataset.v+'%';
      });
    }
  });

  /* Risk circles */
  ScrollTrigger.create({
    trigger:'#riskBreakdownSection',
    start:'top 80%',
    once:true,
    onEnter:function(){
      document.querySelectorAll('.risk-circle-fill').forEach(function(c){
        var offset=parseFloat(c.dataset.offset||0);
        c.style.transition='stroke-dashoffset 1.6s cubic-bezier(.4,0,.2,1) .2s';
        c.style.strokeDashoffset=offset;
      });
    }
  });

  /* Trajectory */
  gsap.to('#trajSection',{opacity:1,y:0,duration:.8,ease:'power2.out',
    scrollTrigger:{trigger:'#trajSection',start:'top 80%',once:true}
  });

  /* CTA */
  gsap.to('#ctaSection',{opacity:1,y:0,duration:.8,ease:'power2.out',
    scrollTrigger:{trigger:'#ctaSection',start:'top 80%',once:true}
  });

  /* Hero section */
  gsap.to('#heroSection',{opacity:1,y:0,duration:.9,ease:'power2.out',delay:.4});
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   7. SCROLL SPY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initScrollSpy(){
  var nav=document.getElementById('stickyNav');
  var dots=nav.querySelectorAll('.nav-dot');
  var sections=['heroSection','bioAgeCard','scoreCard','radarSection','insightsSection','trajSection','ctaSection'];

  /* Show nav after scroll */
  window.addEventListener('scroll',function(){
    if(window.scrollY>200){nav.classList.add('visible');}
    else{nav.classList.remove('visible');}
    var current=0;
    sections.forEach(function(id,i){
      var el=document.getElementById(id);
      if(el && el.getBoundingClientRect().top<300) current=i;
    });
    dots.forEach(function(d,i){d.classList.toggle('active',i===current);});
  });

  dots.forEach(function(d){
    d.addEventListener('click',function(){
      var id=d.dataset.section;
      var el=document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth',block:'start'});
    });
  });
}
</script>
</body>
</html>
